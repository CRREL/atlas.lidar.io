<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ATLAS</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/atlas.lidar.io.css">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">

      <h1>ATLAS</h1>

      <div class="status-report">
        <ul class="status-report-list">
          {{#each status}}
          <li class="status-report-{{status.name}}">
            <span class="glyphicon glyphicon-{{status.glyphicon}}" aria-hidden="true"></span>
            <span class="status-report-name">{{name}}</span>
            <span class="status-report-status">{{status.name}}</span>
          </li>
          {{/each}}
        </ul>
      </div>

      <div class="row">
          {{#with heartbeat}}
        <div class="col-sm-3 col-xs-12">
          <h3>Battery 1</h3>
          {{battery-charge soc1}}

          <h3>Battery 2</h3>
          {{battery-charge soc2}}
        </div>

        <div class="col-xs-12 col-md-4 col-md-offset-1">
          <h2>Last heartbeat</h2>

          <dl>
            <dt>Timestamp</dt>
            <dd>{{start_time}}</dd>

            <dt>External temperature</dt>
            <dd>{{degrees-celsius external_temperature}}</dd>

            <dt>Mount temperature</dt>
            <dd>{{degrees-celsius mount_temperature}}</dd>

            <dt>Atmospheric pressure</dt>
            <dd>{{millibars pressure}}</dd>

            <dt>Relative humidity</dt>
            <dd>{{percentage humidity}}</dd>
          </dl>
        </div>

        <div class="col-xs-12 col-md-4">
          <h2>Last scan</h2>

          <dl>
            <dt>Start time</dt>
            <dd>{{last_scan.start}}</dd>

            <dt>End time</dt>
            <dd>{{last_scan.end}}</dd>

            <dt>Number of points</dt>
            <dd>{{commas last_scan.detail.num_points}}</dd>
          </dl>
        </div>
        {{/with}}
      </div>

      <h2>Cameras</h2>

      <div class="camera-picker">
        <div class="row">
          <div class="col-xs-12 camera-picker-thumbnails">
            {{#each cameras}}
            <img src="{{camera.latest_image.url}}" class="img-rounded camera-picker-thumbnail" data-name="{{camera.name}}">
            {{/each}}
          </div>
        </div>

        <div class="row camera-picker-viewport">
          <div class="col-xs-12 col-sm-8 col-sm-offset-2">
            <div class="camera-picker-images">
              {{#each cameras}}
              <div class="thumbnail camera-picker-image hidden" data-name="{{camera.name}}">
                <a href="{{camera.latest_image.url}}">
                  <img src="{{camera.latest_image.url}}">
                </a>
                <div class="caption">{{name}} at {{camera.latest_image.datetime}}</div>
              </div>
              {{/each}}
            </div>
            <div class="camera-picker-gifs">
              {{#each cameras}}
              <div class="thumbnail camera-picker-image hidden" data-name="{{camera.name}}">
                <a href="{{gif.url}}">
                  <img src="{{gif.url}}">
                </a>
                <div class="caption">{{name}} over the last {{gif.days}} days.</div>
              </div>
              {{/each}}
            </div>
          </div>
          <div class="col-xs-12 col-sm-1">
            <button class="btn btn-default camera-picker-animate">
              <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
              Animation
            </button>
          </div>
        </div>
      </div>

      <h2>Graphs</h2>

      <h3>Battery state of charge</h3>
      <div class="row">
        <div id="soc-graph" class="col-xs-12">
        </div>
      </div>

      <h3>Temperature</h3>
      <div class="row">
        <div id="temperature-graph" class="col-xs-12">
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="/static/dygraph.min.js"></script>
    <script src="/static/dygraph-synchronizer.js"></script>
    <script src="/static/index.js"></script>
  </body>
</html>
